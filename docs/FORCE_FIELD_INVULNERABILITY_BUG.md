# Force Field Invulnerability Bug Analysis

## Problem
When a force field blocks a projectile, invulnerability doesn't always trigger properly, especially when two projectiles hit simultaneously in the same frame.

## Root Cause

In `checkEnemyProjectileCollision()` (collision.js line 111), the function loops through all projectiles:

1. **First projectile hits force field:**
   - Sets `game.forceField.invulnerabilityTime = 60`
   - Decreases force field level
   - **Does NOT set `game.invulnerabilityTime`** (only sets it if force field destroyed)
   - **Continues loop** (doesn't return early)

2. **Second projectile (same frame, same loop iteration):**
   - Checks: `game.forceField.invulnerabilityTime <= 0` → **FALSE** (just set to 60)
   - Checks: `game.invulnerabilityTime > 0` → **FALSE** (still 0)
   - Goes to **else block** → Player takes damage!

## The Bug

When a force field blocks a hit but isn't destroyed:
- `game.forceField.invulnerabilityTime` is set (protects force field from multiple hits)
- `game.invulnerabilityTime` is **NOT set** (player not protected from other projectiles)

## Impact

Multiple projectiles hitting in the same frame can damage the player even though a force field blocked one of them, because:
1. Force field blocks first projectile
2. Second projectile sees force field is "invulnerable" (can't take another hit)
3. But player isn't invulnerable yet
4. Second projectile hits player directly

## Solution

Set `game.invulnerabilityTime` immediately when force field blocks a hit, not just when it's destroyed. This ensures player invulnerability applies to all projectiles in the same frame.

