/* ========================================== */
/* MOBILE LANDSCAPE ROTATION */
/* ========================================== */
/* Forces landscape orientation on portrait-held devices */
/* Uses CSS classes, not inline styles */

/* Portrait mode - rotate viewport container to landscape */
.viewport-container.portrait-forced {
  /* Rotate to landscape orientation */
  transform: rotate(90deg) !important;
  transform-origin: center center !important;
  
  /* Use viewport dimensions swapped to force landscape */
  /* Override modern viewport units (svh/dvh) that break with rotation */
  width: 100vh !important;
  height: 100vw !important;
  max-width: 100vh !important; /* Override shared-viewport-container.css max-width */
  min-height: 100vw !important; /* Override shared-viewport-container.css min-height */
  /* Note: height 100vw overrides any dvh/svh/calc from shared-viewport-container.css */
  
  /* Position to center the rotated container */
  position: fixed !important;
  top: 50% !important;
  left: 50% !important;
  margin-left: -50vh !important;
  margin-top: -50vw !important;
  
  /* Reset padding from shared-viewport-container.css that breaks rotation */
  padding-top: 0 !important;
  padding-bottom: 0 !important;
  
  /* Keep flex display for child layout - it rotates with the container */
  display: flex !important;
  flex-direction: column !important;
  overflow: hidden !important;
  box-sizing: border-box !important;
  will-change: transform !important;
}

/* Landscape mode - no rotation needed */
.viewport-container.landscape-normal {
  /* Reset any rotation - allow base styles from shared-viewport-container.css */
  transform: none !important;
  /* Reset forced dimensions - allow shared-viewport-container.css to handle sizing */
  width: 100% !important;
  max-width: 100svw !important; /* Restore shared-viewport-container.css value */
  min-height: 100svh !important; /* Restore shared-viewport-container.css value */
  position: relative !important;
  margin: 0 !important;
  top: auto !important;
  left: auto !important;
  display: flex !important;
  flex-direction: column !important;
  overflow: hidden !important;
}

/* Body styles to prevent scrolling when forced */
body.portrait-forced {
  overflow: hidden !important;
  margin: 0 !important;
  padding: 0 !important;
}

/* Ensure footer is completely removed from layout on mobile */
body.mobile .game-footer {
  display: none !important;
}

.viewport-container.portrait-forced .game-footer {
  display: none !important;
}

/* Remove footer from flex layout when hidden on mobile */
body.mobile .game-container > footer.game-footer {
  flex: 0 0 0 !important;
  min-height: 0 !important;
  max-height: 0 !important;
  padding: 0 !important;
  margin: 0 !important;
}

/* Canvas sizing when rotated - override broken vw/vh units */
.viewport-container.portrait-forced #gameCanvas {
  /* Mobile CSS has max-width: 100vw and max-height: calc(100vh - 12vh) */
  /* These break when rotated because vw/vh still reference device orientation */
  max-width: 100% !important;
  max-height: 100% !important;
}

/* Ensure .gameplay-area fills available space when footer is hidden */
body.mobile .gameplay-area {
  flex: 1 !important;
  min-height: 0 !important;
}

/* Mobile pause overlay button - position relative to rotated container */
.viewport-container.portrait-forced .mobile-pause-overlay-button {
  /* Position relative to rotated container, not viewport */
  position: absolute !important;
  top: 50% !important;
  left: 50% !important;
  transform: translate(-50%, -50%) !important;
  /* The viewport-container is already rotated, so the button rotates with it */
  width: min(20vw, 25vh) !important;
  height: min(8vh, 10vw) !important;
  pointer-events: auto !important;
  z-index: 10001 !important;
}

/* Main menu overlay - fix vw/vh units that break with rotation */
.viewport-container.portrait-forced .main-menu-overlay {
  /* Override vw/vh units - use percentages to reference rotated container */
  width: 100% !important; /* Use percentage instead of 100vw */
  height: 100% !important; /* Use percentage instead of 100vh */
  /* Reset any vw/vh-based padding */
  padding: min(2%, 2%) !important; /* Use percentage or remove vw/vh */
}

.viewport-container.portrait-forced .main-menu-content {
  /* Override vw/vh units - use percentages to reference rotated container */
  max-width: 95% !important; /* Use percentage instead of 95vw */
  max-height: 95% !important; /* Use percentage instead of 95vh */
  width: 95% !important; /* Use percentage instead of 95vw */
}

/* Front page overlay: no special portrait-forced overrides required.
   The overlay uses percentages (100%) which work correctly with rotation. */

/* ========================================== */
/* LEADERBOARD MODAL - Landscape Rotation */
/* ========================================== */
/* Leaderboard modal is now inside viewport-container (like other panels: settings, instructions, sound-test) */
/* Since it's inside the rotated viewport-container, it will rotate with the container automatically */
/* No special handling needed - it behaves like other panels */

