<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Mobile Menu Test - SuiTwo</title>
  <link rel="stylesheet" href="game-styles.css">
  <link rel="stylesheet" href="src/game/rendering/responsive/mobile-ui-styles.css">
  <style>
    /* CSS Reset for this test page */
    * {
      box-sizing: border-box;
    }
    
    html, body {
      margin: 0;
      padding: 0;
      height: auto !important;
      min-height: 100vh;
      overflow-x: hidden !important;
      overflow-y: auto !important;
      position: static !important;
    }
    
    body {
      padding: 20px;
      background: linear-gradient(135deg, #0a0a0a 0%, #0f1419 50%, #1a2332 100%);
      color: white;
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
    }
    
    .test-container {
      max-width: 1200px;
      margin: 0 auto;
      padding-bottom: 50px;
    }
    
    .test-header {
      text-align: center;
      margin-bottom: 30px;
    }
    
    .test-header h1 {
      font-size: 3rem;
      color: #4DA2FF;
      margin-bottom: 10px;
    }
    
    .test-header p {
      font-size: 1.1rem;
      color: #ccc;
    }
    
    .menu-controls {
      display: flex;
      justify-content: center;
      gap: 20px;
      margin-bottom: 40px;
      flex-wrap: wrap;
    }
    
    .menu-btn {
      background: linear-gradient(135deg, #4DA2FF, #3A7BD5);
      border: none;
      color: white;
      padding: 12px 25px;
      font-size: 1rem;
      font-weight: bold;
      border-radius: 25px;
      cursor: pointer;
      transition: all 0.3s ease;
      box-shadow: 0 4px 15px rgba(77, 162, 255, 0.3);
    }
    
    .menu-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 6px 20px rgba(77, 162, 255, 0.5);
    }
    
    .menu-btn.active {
      background: linear-gradient(135deg, #39ff14, #28a745);
      box-shadow: 0 4px 15px rgba(57, 255, 20, 0.3);
    }
    
    .test-section {
      background: linear-gradient(135deg, rgba(0, 0, 0, 0.8) 0%, rgba(15, 20, 25, 0.9) 100%);
      border: 2px solid rgba(77, 162, 255, 0.3);
      border-radius: 20px;
      padding: 25px;
      margin-bottom: 30px;
      box-shadow: 0 0 30px rgba(0, 0, 0, 0.5);
    }
    
    .test-section h3 {
      color: #4DA2FF;
      font-size: 1.5rem;
      margin-bottom: 20px;
      text-align: center;
    }
    
    .preview-frame {
      background: linear-gradient(135deg, #0a0a0a 0%, #0f1419 50%, #1a2332 100%);
      border: 2px solid rgba(77, 162, 255, 0.3);
      border-radius: 15px;
      padding: 20px;
      position: relative;
      min-height: 400px;
      max-height: 600px;
      overflow-y: auto;
    }
    
    .instructions {
      background: rgba(57, 255, 20, 0.1);
      border: 2px solid rgba(57, 255, 20, 0.3);
      border-radius: 15px;
      padding: 25px;
      margin-bottom: 30px;
    }
    
    .instructions h3 {
      color: #39ff14;
      margin-bottom: 20px;
      text-align: center;
    }
    
    .instructions ul {
      list-style: none;
      padding: 0;
      margin: 0;
      color: #ccc;
      line-height: 1.6;
    }
    
    .instructions li {
      margin-bottom: 8px;
    }
    
    .debug-info {
      background: rgba(255, 255, 255, 0.05);
      border: 1px solid rgba(255, 255, 255, 0.1);
      border-radius: 10px;
      padding: 15px;
      font-family: monospace;
      font-size: 0.9rem;
      color: #ccc;
      white-space: pre-wrap;
      max-height: 300px;
      overflow-y: auto;
    }
    
    /* Mobile-specific adjustments */
    @media (max-width: 768px) {
      body {
        padding: 10px;
      }
      
      .test-container {
        padding: 0;
      }
      
      .test-header h1 {
        font-size: 2rem;
      }
      
      .test-header p {
        font-size: 1rem;
      }
      
      .menu-controls {
        gap: 10px;
      }
      
      .menu-btn {
        padding: 10px 20px;
        font-size: 0.9rem;
      }
      
      .preview-frame {
        padding: 15px;
        min-height: 300px;
        max-height: 500px;
      }
      
      .debug-info {
        font-size: 0.8rem;
        padding: 10px;
        max-height: 200px;
      }
    }
  </style>
</head>
<body>
  <div class="test-container">
    <div class="test-header">
      <h1><span style="color: #39ff14;">üì±</span> Mobile Menu Test</h1>
      <p>Test mobile-optimized menu layouts and interactions</p>
    </div>
    
    <div class="menu-controls">
      <button class="menu-btn active" onclick="showMenu('front-page')">Front Page</button>
      <button class="menu-btn" onclick="showMenu('main-menu')">Main Menu</button>
      <button class="menu-btn" onclick="showMenu('settings')">Settings</button>
      <button class="menu-btn" onclick="showMenu('instructions')">Instructions</button>
      <button class="menu-btn" onclick="showMenu('leaderboard')">Leaderboard</button>
      <button class="menu-btn" onclick="showMenu('sound-test')">Sound Test</button>
    </div>
    
    <div class="instructions">
      <h3>üìã Test Instructions</h3>
      <ul>
        <li><strong>Front Page:</strong> Responsive start screen that adapts to screen size</li>
        <li><strong>Main Menu:</strong> Ultra-compact layout with small text and maximum horizontal space usage</li>
        <li><strong>Settings:</strong> Touch-friendly controls that scale with screen size</li>
        <li><strong>Instructions:</strong> Readable content that adapts to device</li>
        <li><strong>Leaderboard:</strong> Responsive score display for all screen sizes</li>
        <li><strong>Sound Test:</strong> Adaptive audio controls with proper touch targets</li>
        <li><strong>Mobile Menu Features:</strong></li>
        <li>‚Ä¢ Touch-friendly buttons with visual feedback</li>
        <li>‚Ä¢ Swipe gestures to close panels (swipe left/up)</li>
        <li>‚Ä¢ Enhanced close buttons (44px minimum)</li>
        <li>‚Ä¢ Mobile-optimized panel animations</li>
        <li>‚Ä¢ Touch state management and tracking</li>
        <li>‚Ä¢ Backdrop blur effects for panels</li>
        <li><strong>Responsive Breakpoints:</strong></li>
        <li>‚Ä¢ Desktop (>1366px): Full-size experience (80vh max-height)</li>
        <li>‚Ä¢ Tablet Landscape (1024-1366px): 80% width, 85vh max-height</li>
        <li>‚Ä¢ Tablet Portrait (768-1023px): 90% width, 90vh max-height</li>
        <li>‚Ä¢ Mobile Landscape (480-767px): 95% width, 95vh max-height</li>
        <li>‚Ä¢ Mobile Portrait (<480px): 100% width, 100vh max-height</li>
        <li>‚Ä¢ Very Short Screens (<500px height): Compact layout, 95vh max-height</li>
        <li>Click menu buttons above to test different screens</li>
        <li>Try swipe gestures on mobile panels (swipe left/up to close)</li>
        <li>Resize your browser window to see responsive behavior</li>
        <li>Use F12 DevTools device simulation for mobile testing</li>
      </ul>
    </div>
    
    <div class="test-section">
      <h3>üéÆ Menu Preview</h3>
      <div class="preview-frame" id="menuPreview">
        <!-- Menu content will be loaded here -->
      </div>
    </div>
    
    <div class="test-section">
      <h3>üêõ Debug Information</h3>
      <pre id="debugInfo" class="debug-info"></pre>
    </div>
  </div>
  
  <script src="src/game/systems/device/device-detection.js"></script>
  
  <script>
    let currentMenu = 'front-page';
    
    // Mock game data for testing
    const mockGameData = {
      bestScore: 12345,
      gamesPlayed: 42,
      settings: {
        mouseSensitivity: 75,
        backgroundMusic: true,
        soundEffects: true,
        autoFire: true
      },
      leaderboard: [
        { rank: 1, score: 50000, date: '2024-01-15' },
        { rank: 2, score: 45000, date: '2024-01-14' },
        { rank: 3, score: 40000, date: '2024-01-13' },
        { rank: 4, score: 35000, date: '2024-01-12' },
        { rank: 5, score: 30000, date: '2024-01-11' }
      ]
    };
    
    // Initialize the test
    document.addEventListener('DOMContentLoaded', function() {
      initializeTest();
      showMenu('front-page');
    });
    
    function initializeTest() {
      updateDebugInfo();
      setInterval(updateDebugInfo, 1000);
    }
    
    function showMenu(menuType) {
      currentMenu = menuType;
      
      // Update active button
      document.querySelectorAll('.menu-btn').forEach(btn => {
        btn.classList.remove('active');
        if (btn.textContent.toLowerCase().includes(menuType.replace('-', ' '))) {
          btn.classList.add('active');
        }
      });
      
      // Load menu content
      const preview = document.getElementById('menuPreview');
      preview.innerHTML = getMenuHTML(menuType);
      
      updateDebugInfo();
    }
    
    function getMenuHTML(menuType) {
      switch(menuType) {
        case 'front-page':
          return `
            <div class="front-page-overlay" style="position: relative; height: auto; background: transparent;">
              <div class="front-page-content">
                <h1 class="game-title">
                  <img src="assets/SuiTwo_Profile.webp" alt="SuiTwo" class="title-profile-image"> SuiTwo
                </h1>
                <p class="game-subtitle">Space Shooter Alpha v0.1</p>
                <div class="game-description">
                  <p>Navigate through the cosmos, defeat enemies, and survive as long as possible!</p>
                  <p>Use MOUSE to move and P to pause. Auto-fire is enabled!</p>
                </div>
                <button class="enter-game-btn">
                  üéÆ Enter Game
                </button>
                <div class="audio-note">
                  <small>üîä Audio will start after clicking Enter</small>
                </div>
              </div>
            </div>
          `;
          
        case 'main-menu':
          return `
            <div class="main-menu-overlay" style="position: relative; height: auto; background: transparent;">
              <div class="main-menu-content">
                <div class="game-title">
                  <h1><img src="assets/SuiTwo_Profile.webp" alt="SuiTwo" class="title-profile-image"> SuiTwo</h1>
                  <div class="version-badge">Alpha v0.1</div>
                </div>
                
                <div class="menu-buttons">
                  <button class="menu-btn primary">
                    <span class="btn-icon">‚ñ∂Ô∏è</span>
                    Start Game
                  </button>
                  <button class="menu-btn">
                    <span class="btn-icon">‚öôÔ∏è</span>
                    Settings
                  </button>
                  <button class="menu-btn">
                    <span class="btn-icon">üìñ</span>
                    How to Play
                  </button>
                  <button class="menu-btn">
                    <span class="btn-icon">üèÜ</span>
                    Leaderboard
                  </button>
                  <button class="menu-btn">
                    <span class="btn-icon">üîä</span>
                    Sound Test
                  </button>
                </div>
                
                <div class="menu-footer">
                  <div class="game-stats">
                    <div class="stat-item">
                      <span class="stat-label">Best Score:</span>
                      <span class="stat-value">${mockGameData.bestScore.toLocaleString()}</span>
                    </div>
                    <div class="stat-item">
                      <span class="stat-label">Games Played:</span>
                      <span class="stat-value">${mockGameData.gamesPlayed}</span>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          `;
          
        case 'settings':
          return `
            <div class="settings-panel" style="position: relative; height: auto; background: transparent;">
              <div class="settings-content">
                <h2 class="settings-title">‚öôÔ∏è Game Settings</h2>
                
                <div class="settings-group">
                  <h3>üéÆ Controls</h3>
                  <div class="setting-item">
                    <div class="setting-label">Mouse Sensitivity</div>
                    <div class="setting-controls">
                      <span>Low</span>
                      <input type="range" class="slider" min="10" max="100" value="${mockGameData.settings.mouseSensitivity}">
                      <span class="slider-value">${mockGameData.settings.mouseSensitivity}</span>
                      <span>High</span>
                    </div>
                  </div>
                </div>
                
                <div class="settings-group">
                  <h3>üîä Audio</h3>
                  <div class="setting-item">
                    <div class="setting-label">Background Music</div>
                    <div class="setting-controls">
                      <label class="toggle-switch">
                        <input type="checkbox" ${mockGameData.settings.backgroundMusic ? 'checked' : ''}>
                        <span class="slider"></span>
                      </label>
                    </div>
                  </div>
                  <div class="setting-item">
                    <div class="setting-label">Sound Effects</div>
                    <div class="setting-controls">
                      <label class="toggle-switch">
                        <input type="checkbox" ${mockGameData.settings.soundEffects ? 'checked' : ''}>
                        <span class="slider"></span>
                      </label>
                    </div>
                  </div>
                </div>
                
                <div class="settings-group">
                  <h3>üéØ Gameplay</h3>
                  <div class="setting-item">
                    <div class="setting-label">Auto-Fire</div>
                    <div class="setting-controls">
                      <label class="toggle-switch">
                        <input type="checkbox" ${mockGameData.settings.autoFire ? 'checked' : ''}>
                        <span class="slider"></span>
                      </label>
                    </div>
                  </div>
                </div>
                
                <div class="settings-buttons">
                  <button class="settings-btn primary">üíæ Save Settings</button>
                  <button class="settings-btn">‚Ü©Ô∏è Back to Menu</button>
                </div>
              </div>
            </div>
          `;
          
        case 'instructions':
          return `
            <div class="instructions-panel" style="position: relative; height: auto; background: transparent;">
              <div class="instructions-content">
                <h2 class="instructions-title">üìñ How to Play</h2>
                
                <div class="instructions-section">
                  <h3>üéÆ Basic Controls</h3>
                  <p>Use your mouse to move the player ship vertically. The ship will automatically fire at enemies.</p>
                  <ul>
                    <li><strong>Mouse:</strong> Move player up and down</li>
                    <li><strong>P Key:</strong> Pause/Resume game</li>
                    <li><strong>Auto-Fire:</strong> Ship fires automatically</li>
                  </ul>
                </div>
                
                <div class="instructions-section">
                  <h3>üéØ Objectives</h3>
                  <p>Survive as long as possible while defeating enemies and collecting power-ups.</p>
                  <ul>
                    <li>Destroy enemies to earn points</li>
                    <li>Collect coins and power-ups</li>
                    <li>Avoid enemy projectiles</li>
                    <li>Defeat bosses for bonus points</li>
                  </ul>
                </div>
                
                <div class="instructions-section">
                  <h3>üíé Power-Ups</h3>
                  <p>Collect various power-ups to enhance your ship's capabilities.</p>
                  <ul>
                    <li><strong>Blue Orbs:</strong> Increase firepower</li>
                    <li><strong>Coins:</strong> Earn currency</li>
                    <li><strong>Force Field:</strong> Temporary protection</li>
                  </ul>
                </div>
                
                <div class="instructions-buttons">
                  <button class="instructions-btn primary">‚ñ∂Ô∏è Start Playing</button>
                  <button class="instructions-btn">‚Ü©Ô∏è Back to Menu</button>
                </div>
              </div>
            </div>
          `;
          
        case 'leaderboard':
          return `
            <div class="leaderboard-panel" style="position: relative; height: auto; background: transparent;">
              <div class="leaderboard-content">
                <h2 class="leaderboard-title">üèÜ Leaderboard</h2>
                
                <div class="leaderboard-list">
                  ${mockGameData.leaderboard.map(entry => `
                    <div class="leaderboard-item">
                      <span class="leaderboard-rank">#${entry.rank}</span>
                      <span class="leaderboard-score">${entry.score.toLocaleString()}</span>
                      <span class="leaderboard-date">${entry.date}</span>
                    </div>
                  `).join('')}
                </div>
                
                <div class="leaderboard-buttons">
                  <button class="leaderboard-btn primary">üîÑ Refresh</button>
                  <button class="leaderboard-btn">‚Ü©Ô∏è Back to Menu</button>
                </div>
              </div>
            </div>
          `;
          
        case 'sound-test':
          return `
            <div class="sound-test-panel" style="position: relative; height: auto; background: transparent;">
              <div class="sound-test-content">
                <h2 class="sound-test-title">üîä Sound Test</h2>
                
                <div class="sound-controls">
                  <button class="sound-btn">
                    <span class="btn-icon">üî´</span>
                    Fire Sound
                  </button>
                  <button class="sound-btn">
                    <span class="btn-icon">üí•</span>
                    Explosion
                  </button>
                  <button class="sound-btn">
                    <span class="btn-icon">üéµ</span>
                    Music
                  </button>
                  <button class="sound-btn">
                    <span class="btn-icon">ü™ô</span>
                    Coin Collect
                  </button>
                </div>
                
                <div class="sound-test-buttons">
                  <button class="sound-test-btn primary">üîä Test All Sounds</button>
                  <button class="sound-test-btn">‚Ü©Ô∏è Back to Menu</button>
                </div>
              </div>
            </div>
          `;
          
        default:
          return '<p>Menu not found</p>';
      }
    }
    
    function updateDebugInfo() {
      const debugInfoElement = document.getElementById('debugInfo');
      if (debugInfoElement) {
        const deviceInfo = DeviceDetection.getDeviceInfo();
        
        debugInfoElement.textContent = `
Device Type: ${deviceInfo.deviceType}
Screen Size: ${window.innerWidth}x${window.innerHeight}
Touch Support: ${deviceInfo.hasTouchSupport}
Current Menu: ${currentMenu}

--- Mobile Menu Features ---
‚úÖ Ultra-compact two-column layout (90% width)
‚úÖ Small text sizing (0.75-0.85rem)
‚úÖ Single-line text with ellipsis overflow
‚úÖ Maximum horizontal space utilization
‚úÖ Minimal button heights (30-32px)
‚úÖ Touch-optimized controls
‚úÖ Swipe gestures for panel navigation
‚úÖ Enhanced close buttons (44px minimum)
‚úÖ Touch feedback and visual states
‚úÖ Mobile panel animations
‚úÖ Backdrop blur effects
‚úÖ Menu state management

--- Menu Types ---
‚Ä¢ Front Page: Initial entry screen
‚Ä¢ Main Menu: Navigation hub
‚Ä¢ Settings: Game configuration
‚Ä¢ Instructions: How to play guide
‚Ä¢ Leaderboard: High scores
‚Ä¢ Sound Test: Audio testing

--- Responsive Breakpoints ---
‚Ä¢ Mobile: < 768px width
‚Ä¢ Tablet: 768px - 1024px width
‚Ä¢ Desktop: > 1024px width
        `;
      }
    }
  </script>
</body>
</html>
