<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Mobile UI Test - SuiTwo</title>
  <link rel="stylesheet" href="game-styles.css">
  <link rel="stylesheet" href="src/game/rendering/responsive/mobile-ui-styles.css">
  <style>
    /* CSS Reset for this test page */
    * {
      box-sizing: border-box;
    }
    
    html, body {
      margin: 0;
      padding: 0;
      height: auto !important;
      min-height: 100vh;
      overflow-x: hidden !important;
      overflow-y: auto !important;
      position: static !important;
    }
    
    body {
      padding: 20px;
      background: linear-gradient(135deg, #0a0a0a 0%, #0f1419 50%, #1a2332 100%);
      color: white;
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
    }
    
    .test-container {
      max-width: 1200px;
      margin: 0 auto;
      padding-bottom: 50px;
    }
    
    .test-header {
      text-align: center;
      margin-bottom: 30px;
    }
    
    .test-header h1 {
      color: #4DA2FF;
      font-size: 2.5rem;
      margin-bottom: 10px;
    }
    
    .test-header p {
      color: #ccc;
      font-size: 1.1rem;
    }
    
    .layout-controls {
      display: flex;
      justify-content: center;
      gap: 15px;
      margin-bottom: 30px;
      flex-wrap: wrap;
    }
    
    .layout-btn {
      background: linear-gradient(135deg, #4DA2FF, #3A7BD5);
      border: none;
      color: white;
      padding: 12px 24px;
      border-radius: 25px;
      font-size: 1rem;
      font-weight: bold;
      cursor: pointer;
      transition: all 0.3s ease;
      box-shadow: 0 4px 15px rgba(77, 162, 255, 0.3);
    }
    
    .layout-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 6px 20px rgba(77, 162, 255, 0.4);
    }
    
    .layout-btn.active {
      background: linear-gradient(135deg, #39ff14, #2dd4aa);
      box-shadow: 0 4px 15px rgba(57, 255, 20, 0.3);
    }
    
    .device-info {
      background: rgba(77, 162, 255, 0.1);
      border: 2px solid rgba(77, 162, 255, 0.3);
      border-radius: 15px;
      padding: 20px;
      margin-bottom: 30px;
      text-align: center;
    }
    
    .device-info h3 {
      color: #4DA2FF;
      margin-bottom: 15px;
    }
    
    .device-info .info-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 15px;
    }
    
    .info-item {
      background: rgba(0, 0, 0, 0.3);
      padding: 10px;
      border-radius: 8px;
      border: 1px solid rgba(77, 162, 255, 0.2);
    }
    
    .info-label {
      color: #ccc;
      font-size: 0.9rem;
      margin-bottom: 5px;
    }
    
    .info-value {
      color: #39ff14;
      font-weight: bold;
      font-size: 1.1rem;
    }
    
    .ui-preview {
      background: rgba(0, 0, 0, 0.5);
      border: 2px solid rgba(77, 162, 255, 0.3);
      border-radius: 20px;
      padding: 20px;
      margin-bottom: 30px;
    }
    
    .ui-preview h3 {
      color: #4DA2FF;
      margin-bottom: 20px;
      text-align: center;
    }
    
    .preview-frame {
      background: linear-gradient(135deg, #0a0a0a 0%, #0f1419 50%, #1a2332 100%);
      border: 2px solid rgba(77, 162, 255, 0.3);
      border-radius: 15px;
      padding: 20px;
      position: relative;
      min-height: 400px;
      max-height: 600px;
      overflow-y: auto;
    }
    
    .instructions {
      background: rgba(57, 255, 20, 0.1);
      border: 2px solid rgba(57, 255, 20, 0.3);
      border-radius: 15px;
      padding: 20px;
      margin-bottom: 30px;
    }
    
    .instructions h3 {
      color: #39ff14;
      margin-bottom: 15px;
    }
    
    .instructions ul {
      color: #ccc;
      line-height: 1.6;
      padding-left: 20px;
    }
    
    .instructions li {
      margin-bottom: 8px;
    }
    
    .debug-info {
      background: rgba(255, 255, 255, 0.05);
      border: 1px solid rgba(255, 255, 255, 0.1);
      border-radius: 10px;
      padding: 15px;
      font-family: monospace;
      font-size: 0.9rem;
      color: #ccc;
      white-space: pre-wrap;
      max-height: 300px;
      overflow-y: auto;
    }
    
    /* Mobile-specific adjustments */
    @media (max-width: 768px) {
      body {
        padding: 10px;
      }
      
      .test-container {
        padding: 0;
      }
      
      .test-header h1 {
        font-size: 2rem;
      }
      
      .test-header p {
        font-size: 1rem;
      }
      
      .layout-controls {
        gap: 10px;
      }
      
      .layout-btn {
        padding: 10px 20px;
        font-size: 0.9rem;
      }
      
      .device-info .info-grid {
        grid-template-columns: 1fr;
        gap: 10px;
      }
      
      .preview-frame {
        padding: 15px;
        min-height: 300px;
        max-height: 500px;
      }
      
      .debug-info {
        font-size: 0.8rem;
        padding: 10px;
        max-height: 200px;
      }
    }
  </style>
</head>
<body>
  <div class="test-container">
    <div class="test-header">
      <h1>üì± Mobile UI Test</h1>
      <p>Test different UI layouts for different screen sizes</p>
    </div>
    
    <div class="layout-controls">
      <button class="layout-btn active" onclick="switchLayout('desktop')">üñ•Ô∏è Desktop</button>
      <button class="layout-btn" onclick="switchLayout('tablet')">üì± Tablet</button>
      <button class="layout-btn" onclick="switchLayout('mobile')">üì± Mobile</button>
    </div>
    
    <div class="device-info">
      <h3>üîç Device Detection</h3>
      <div class="info-grid">
        <div class="info-item">
          <div class="info-label">Device Type</div>
          <div class="info-value" id="deviceType">Loading...</div>
        </div>
        <div class="info-item">
          <div class="info-label">Screen Size</div>
          <div class="info-value" id="screenSize">Loading...</div>
        </div>
        <div class="info-item">
          <div class="info-label">Current Layout</div>
          <div class="info-value" id="currentLayout">Loading...</div>
        </div>
        <div class="info-item">
          <div class="info-label">Touch Support</div>
          <div class="info-value" id="touchSupport">Loading...</div>
        </div>
      </div>
    </div>
    
    <div class="instructions">
      <h3>üìã Test Instructions</h3>
      <ul>
        <li><strong>Desktop Layout:</strong> Full header with all stats, game stats overlay, full footer</li>
        <li><strong>Tablet Layout:</strong> Compact header, game stats moved to sidebar, compact footer</li>
        <li><strong>Mobile Layout:</strong> Compact header with integrated game stats (Score, Orb Level with game orb image, Tier, Coins with game coin image), condensed distance stat (icon + value only), no separate stats panel, footer hidden</li>
        <li>Click the layout buttons above to test different UI configurations</li>
        <li>Resize your browser window to see responsive behavior</li>
        <li>Check the console for detailed debug information</li>
      </ul>
    </div>
    
    <div class="ui-preview">
      <h3>üéÆ UI Preview</h3>
      <div class="preview-frame" id="uiPreview">
        <!-- UI elements will be dynamically added here -->
      </div>
    </div>
    
    <div class="debug-info" id="debugInfo">
      Loading debug information...
    </div>
  </div>

  <!-- Load required modules -->
  <script src="src/game/systems/device/device-detection.js"></script>
  <script src="src/game/systems/device/device-config.js"></script>
  <script src="src/game/rendering/responsive/mobile-ui.js"></script>

  <script>
    let currentLayout = 'desktop';
    
    // Initialize the test
    document.addEventListener('DOMContentLoaded', function() {
      initializeTest();
      enableScrolling();
    });
    
    function enableScrolling() {
      // Force enable scrolling
      document.documentElement.style.overflowY = 'auto';
      document.body.style.overflowY = 'auto';
      document.documentElement.style.height = 'auto';
      document.body.style.height = 'auto';
      
      // Add some debug info
      console.log('Scrolling enabled');
      console.log('Document height:', document.documentElement.scrollHeight);
      console.log('Window height:', window.innerHeight);
      console.log('Body height:', document.body.scrollHeight);
    }
    
    function initializeTest() {
      // Initialize MobileUI
      if (typeof MobileUI !== 'undefined') {
        MobileUI.initialize();
        updateDeviceInfo();
        createUIPreview();
        updateDebugInfo();
      } else {
        console.error('MobileUI module not loaded');
      }
    }
    
    function switchLayout(layoutName) {
      currentLayout = layoutName;
      
      // Update button states
      document.querySelectorAll('.layout-btn').forEach(btn => {
        btn.classList.remove('active');
      });
      event.target.classList.add('active');
      
      // Apply layout
      if (typeof MobileUI !== 'undefined') {
        MobileUI.switchLayout(layoutName);
        updateDeviceInfo();
        createUIPreview();
        updateDebugInfo();
      }
    }
    
    function updateDeviceInfo() {
      if (typeof DeviceDetection !== 'undefined') {
        const deviceInfo = DeviceDetection.getDeviceInfo();
        document.getElementById('deviceType').textContent = deviceInfo.deviceType;
        document.getElementById('screenSize').textContent = `${deviceInfo.screenWidth}x${deviceInfo.screenHeight}`;
        document.getElementById('touchSupport').textContent = deviceInfo.capabilities.hasTouchSupport ? 'Yes' : 'No';
      }
      
      if (typeof MobileUI !== 'undefined') {
        document.getElementById('currentLayout').textContent = MobileUI.getCurrentLayout();
      }
    }
    
    function createUIPreview() {
      const preview = document.getElementById('uiPreview');
      preview.innerHTML = '';
      
      // Create header
      const header = document.createElement('div');
      header.className = 'suitch-header';
      header.innerHTML = `
        <div class="title">
          <img src="assets/SuiTwo_Profile.webp" alt="SuiTwo" class="header-logo"> SuiTwo
          <span class="alpha-badge">Alpha v0.1</span>
        </div>
        <div class="stats">
          <div class="stat">
            <span class="stat-icon">üìè</span>
            Distance: <span>1,234</span> m
          </div>
          <div class="stat">
            <span class="stat-icon">ü™ô</span>
            Coins: <span>567</span>
          </div>
          <div class="stat">
            <span class="stat-icon">‚ö°</span>
            Status: <span>Ready</span>
          </div>
        </div>
      `;
      preview.appendChild(header);
      
      // Create game container
      const gameContainer = document.createElement('div');
      gameContainer.className = 'game-container';
      gameContainer.style.flex = '1';
      gameContainer.style.display = 'flex';
      gameContainer.style.justifyContent = 'center';
      gameContainer.style.alignItems = 'center';
      gameContainer.style.position = 'relative';
      gameContainer.style.minHeight = '200px';
      
      // Create game wrapper
      const gameWrapper = document.createElement('div');
      gameWrapper.className = 'game-wrapper';
      gameWrapper.style.flex = '1';
      gameWrapper.style.display = 'flex';
      gameWrapper.style.alignItems = 'center';
      gameWrapper.style.justifyContent = 'center';
      gameWrapper.style.background = 'linear-gradient(135deg, #0a0a0a 0%, #0f1419 50%, #1a2332 100%)';
      gameWrapper.style.borderRadius = '20px';
      gameWrapper.style.border = '2px solid rgba(77, 162, 255, 0.3)';
      gameWrapper.style.position = 'relative';
      gameWrapper.style.minHeight = '150px';
      
      // Create canvas placeholder
      const canvas = document.createElement('div');
      canvas.style.width = '200px';
      canvas.style.height = '120px';
      canvas.style.background = '#000';
      canvas.style.border = '3px solid #4DA2FF';
      canvas.style.borderRadius = '15px';
      canvas.style.display = 'flex';
      canvas.style.alignItems = 'center';
      canvas.style.justifyContent = 'center';
      canvas.style.color = '#4DA2FF';
      canvas.style.fontSize = '14px';
      canvas.textContent = 'Game Canvas';
      
      gameWrapper.appendChild(canvas);
      
      // Create game stats panel
      const gameStatsPanel = document.createElement('div');
      gameStatsPanel.className = 'game-stats-panel';
      gameStatsPanel.innerHTML = `
        <div class="stat-item">
          <span class="stat-label">Score:</span>
          <span class="stat-value">12,345</span>
        </div>
        <div class="stat-item">
          <span class="stat-label">Magic Orb Level:</span>
          <span class="stat-value">3</span>
        </div>
        <div class="stat-item">
          <span class="stat-label">Tier:</span>
          <span class="stat-value">2</span>
        </div>
        <div class="stat-item">
          <span class="stat-label">Bosses Defeated:</span>
          <span class="stat-value">1</span>
        </div>
        <div class="stat-item">
          <span class="stat-label">Force Field:</span>
          <span class="stat-value">Level 2</span>
        </div>
        <div class="stat-item">
          <span class="stat-label">Coin Streak:</span>
          <span class="stat-value">5</span>
        </div>
      `;
      
      gameWrapper.appendChild(gameStatsPanel);
      gameContainer.appendChild(gameWrapper);
      preview.appendChild(gameContainer);
      
      // Create footer
      const footer = document.createElement('div');
      footer.className = 'suitch-footer';
      footer.innerHTML = `
        <div class="controls">
          <span class="control-item">
            <span class="control-icon">üñ±Ô∏è</span>
            Mouse: Move Player
          </span>
          <span class="control-item">
            <span class="control-icon">‚è∏Ô∏è</span>
            P: Pause/Resume
          </span>
          <span class="control-item">
            <span class="control-icon">üî´</span>
            Auto-Fire: Enabled
          </span>
        </div>
        <div class="version-info">
          Alpha Release ‚Ä¢ Build 2024.01 ‚Ä¢ Anti-Cheat Enabled ‚Ä¢ Secure Scoring
        </div>
      `;
      preview.appendChild(footer);
      
      // Apply the current layout
      if (typeof MobileUI !== 'undefined') {
        MobileUI.applyLayout(currentLayout);
      }
    }
    
    function updateDebugInfo() {
      if (typeof MobileUI !== 'undefined') {
        const debugInfo = MobileUI.getDebugInfo();
        document.getElementById('debugInfo').textContent = JSON.stringify(debugInfo, null, 2);
      }
    }
    
    // Listen for window resize
    window.addEventListener('resize', function() {
      setTimeout(() => {
        updateDeviceInfo();
        updateDebugInfo();
      }, 100);
    });
  </script>
</body>
</html>
